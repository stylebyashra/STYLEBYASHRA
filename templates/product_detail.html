{% extends "base.html" %}

{% block title %}{{ product.name }} - STYLEBYASHRA{% endblock %}

{% block content %}
<section class="product-detail-page">
    <div class="container">
        <div class="product-detail-wrapper">
            <div class="product-detail-image">
                <img src="{{ product.image }}" alt="{{ product.name }}">
            </div>
            <div class="product-detail-info">
                <h1 class="product-detail-name">{{ product.name }}</h1>
                <p class="product-detail-category">{{ product.category }}</p>
                <div class="product-detail-price">
                    {% if product.discount_price %}
                    <span class="original-price">৳{{ product.price }}</span>
                    <span class="discount-price">৳{{ product.discount_price }}</span>
                    {% else %}
                    <span>৳{{ product.price }}</span>
                    {% endif %}
                </div>
                <p class="product-detail-description">{{ product.description }}</p>
                
                <div class="quantity-selector">
                    <label for="quantity">Quantity:</label>
                    <input type="number" id="quantity" min="1" value="1">
                </div>
                
                <button class="btn btn-primary btn-large" onclick="addToCartWithQuantity({{ product.id }})">
                    Add to Cart
                </button>
                
                <div class="product-features">
                    <h3>Product Features:</h3>
                    <ul>
                        <li>Premium Quality Material</li>
                        <li>Available in Multiple Sizes</li>
                        <li>Free Delivery in Bangladesh</li>
                        <li>7-Day Return Policy</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
function addToCartWithQuantity(productId) {
    const quantity = parseInt(document.getElementById('quantity').value) || 1;
    
    fetch('/add_to_cart', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ product_id: productId, quantity: quantity })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            document.getElementById('cart-count').textContent = data.cart_count;
            alert('Product added to cart!');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Failed to add product to cart');
    });
}
</script>
{% endblock %}

